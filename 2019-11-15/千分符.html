<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>千分符</title>
</head>
<body>
    <script>

        /* 
            千分符
            1000000  -> 1,000,000
        */

        let str='100100101000'
        let temp='';
        let ary=[];
        for(let i=str.length-1;i>=0;i--){
            temp= str[i]+temp;   //从后往前依次把str中字符放入temp
            if(temp.length==3){  
                ary.unshift(temp);  //放入三个后就把字符串放进ary首位，清空temp
                temp='';
            }else if(i==0){
                ary.unshift(temp);  //循环结束把temp剩余字符放入ary
            }
        }
        srr=ary.toString();  //ary转字符串自带逗号
        console.log(srr);


        // let str = '1002042003040046';
        // let str2 = str.split('').reverse().join('');
        // let str3 = '';
        // console.log(str2);
        // let a = 0;
        // for(let i = 0; i<str.length;i++){
        //     str3+= str2[i];
        //     a++;
        //     if(a === 3 && i <str.length-1){
        //         a = 0;
        //         str3+=',';
        //     }
        // }
        // let str4 = str3.split('').reverse().join('');
        // console.log(str4);


        // let temp = '';
        // let num = 0;
        // for(let i=str.length-1;i>=0;i--){
        //     if((temp.length-num)%3){
        //         temp += str[i];
        //     }else{
        //         console.log(str[i])
        //         temp += ',' +str[i];
        //         num++;
        //     }
        // }
        // console.log(temp);
        // // temp = temp[0]===','?temp.substring(1):temp;
        // temp = temp.substring(1);
        // temp = temp.split('').reverse().join('');
        // console.log(temp);


        /* //自以为加$作用：(似乎有误)
        // 从前往后找到最后一个数字；第一次替换把末尾三个数字前边加上“，”。第二次替换“，”前的数字是结尾 */
        s = str.replace(/(\d{1,3})(?=(\d{3})+$)/g,'$1,');

        s1 = str.replace(/(?<=(\d{3})+)(\d{1,3})/g,',$2');

        console.log(s);
        console.log(s1);
        
    </script>
</body>
</html>