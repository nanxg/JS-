<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>面向对象与new</title>
</head>

<body>
    <script>
        /* 
            JS是一个基于面向对象思想构建的编程语言
    
            面向对象是一种对现实世界理解和抽象的方法，是计算机编程技术发展到一定阶段后的产物。
    
            通过对象来编程，扩展性更强，能够做到高内聚、低耦合。
    
            面向对象：
                特征：封装、继承、多态
                    封装就是归类的过程
    
                将具有相同特征/特性的代码，抽离出来归为一类，然后把描述这个类的细节特性(属性、方法)挂在这个类的原型下的一种编程方式。
    
            *** 换一种写法去写代码 ***
    
            抽象：抽出像的部分(把相同代码抽离)
    
            类：class
                某一个类型
            实例：某一类型中具体的一个个体
    
         */

        function Person(name, age, sex) { //归类 构造函数(够造对象的函数)
            this.name = name;
            this.age = age;
            this.sex = sex;
            // this.say = function(){
            //     alert('我叫'+this.name);
            // }
        }
        let p1 = new Person('xxx', 11, 'x'); //此为实例
        console.log(p1);//{name: "xxx", age: 11, sex: "x"}
        let p2 = new Person('aaa', 12, 'a');

        //console.log(p1.say == p2.say);//false

        Person.prototype.say = function () {
            alert('我叫' + this.name);
        }  //从Person中提取出，两个p指向同一地址，省内存

        console.log(p1.say == p2.say);//true

        let ary1 = []; Array
        let ary2 = []; Array

        console.log(ary1.push == ary2.push);//true


        /* new：
            > 函数一元运算符，专门运算函数；使用new会执行函数，不加()也会执行。
            > 使用new之后，this变成了实例对象(空白对象)。
            > 使用new之后，函数返回值为实例对象，不在是undifined。
            > 如果函数的return后边有基本类型的值，返回结果还是实例；如果是引用类型的值，返回结果为return后的引用类型
            > new的函数首字母大写
    
            创建对象方法：{};new Object;new 函数
        */

        function fn() {
            console.log(this);
        }
        //fn() // 函数的this为window
        new fn // 函数的this为fn{}(实例)


        function fa() {
            //return 3         
            //return [3]         
            return function a() { }
        }
        console.log(fa());//3//[3]//function a(){}

        console.log(new fa());//{}//[3]//function a(){}


    /*
        new Function(); -> function(){}
    */
        function Fn() {
            //this.a = 10;
        }
        function fb() { }
        Fn.prototype.a = 20;
        Fn.b = 30;
        console.dir(Fn);
        console.log(Fn.b);//30     
        Function.prototype.a = 50;
        console.log(Fn.a);//50
        console.log(fb.a);//50

        let f = new Fn();
        let Fb = new Function
        //f.a = 40;
        console.log(f.a);//40//10//20
        console.log(Fb.a);//50

    </script>
</body>

</html>