<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    注册的用户名:<input id="user" type="text"/><span id="s"></span> </br>
<script>

    // URLSearchParams 把对象转成字段拼接的构造函数
    let obj = new URLSearchParams({
        user:'haha',
        age:18,
        pw:123666
    })
    console.log(''+obj);  // 'user=haha&age=18&pw=123666'


   /*  
    method
    body
    headers:{} 
    */
    user.onblur=function(){
        fetch('/post', //请求地址
               {method:'post', //请求方式
               
                body:''+new URLSearchParams({  //请求内容
                    user:this.value
                }),
                headers:{
                    'content-type':'application/x-www-form-urlencoded'
                }
            }).then(d=>d.json()).then(d=>{
                console.log(d);             
            })

        // ajax请求
        // var xhr = new XMLHttpRequest;
        // xhr.open('post','/post',true);
        // xhr.setRequestHeader('hahada','hehada');
        // xhr.send('user='+this.value);
        // xhr.onload = function(){
        //     console.log(xhr.responseText);
        // }
    }
    
</script>
</body>
</html>